<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dora bakes -- Decadent baking</title>

    {% load static %}
    {% load bootstrap4 %}
    {% bootstrap_css %} {# calling bootstrap before custom styles allows over-riding BS styles #}
    {% bootstrap_javascript jquery='full' %}
    <script src="{% static 'js/jquery.bootstrap.modal.forms.js' %}"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.css"/>
    <link rel = "stylesheet" type="text/css" href="../static/bakery/style.css">
    <link rel= "shortcut icon" type='image/png' href="../static/favicon/favicon.png" />
</head>
<body>
    <div class="bakery">

        <div id="nav_bar">
          <b-navbar toggleable="lg" type="light"  prop="sticky">
            <b-navbar-brand tag="h1" href="#" class="mb-0">Dora Bakes</b-navbar-brand>

            <b-navbar-toggle target="nav-collapse"></b-navbar-toggle>

            <b-collapse id="nav-collapse" is-nav>
              <b-navbar-nav>
                <b-nav-item href="#">Sweet</b-nav-item>
                <b-nav-item href="#">Savory</b-nav-item>
              </b-navbar-nav>

              <b-navbar-nav id="login-buttons">
                <b-button id="loginBtn" type="button" class="btn btn-primary" data-toggle="modal" data-target="#loginModal">
                  Login
                </b-button>

                <b-button id="signupBtn" type="button" class="btn btn-primary" data-toggle="modal" data-target="#signupModal">
                  Sign Up
                </b-button>
              </b-navbar-nav>
              <!-- Right aligned nav items -->
              <b-navbar-nav class="ml-auto">

                <b-nav-item-dropdown right>
                  <!-- Using 'button-content' slot -->
                  <template v-slot:button-content>
                    <b-avatar></b-avatar>
                  </template>
                  <b-dropdown-item href="#">Sign Out</b-dropdown-item>
                </b-nav-item-dropdown>
              </b-navbar-nav>
            </b-collapse>
          </b-navbar>
        </div>
        </br>
        <div id="app_greeting">
          [[ message ]]
        </div>
        </br>
        {% include "./_modal.html" %}

        <div id="main_app">

            <recipe-card></recipe-card>

        </div>
    </div>

    <script type="text/javascript">
    $(function () {
        $("#loginBtn").modalForm({
            formURL: "{% url 'login' %}",
            modalID: "#loginModal"
          });

        $("#signupBtn").modalForm({
            formURL: "{% url 'signup' %}",
            modalID: "#signupModal"
          });

        $("#recipeBtn").modalForm({
            formURL: "{% url 'written-recipe' %}",
            modalID: "#recipeModal"
          });
       });
    </script>

    <!-- Vue.js integration -->
    <script src="https://unpkg.com/vue"></script>
    <script src="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.js"></script>


    <!-- template -->
    <template id="recipeCard">
        <div class="recipe-card">
            <div class="recipe-video">
                <img v-bind:src="'static/images/brownie.png'" alt="brownie"/>
                <div class="overlay">
                    <a href="https://www.youtube.com/watch?v=Z1OLG7F3HD4" class="icon" title = "YT Play">
                        <i class="fa fa-youtube-play"></i>
                    </a>
                </div>
            </div>
            </br>

            <div>
                <div class="recipe-text">
                    <div id="recipe-title"> Decadent Brownies </div>
                    <div id="recipe-veg"><img v-bind:src="'static/images/non-veg.png'" alt="veg-indicator"/></div>
                </div>
                </br>
                <div>
                    <div id="recipe-desc"> The best brownies you will ever eat!</div>
                </div>
            </div>

            </br>
            <div id="recipe-written">
                <a id="recipeBtn"> Written recipe </a>
                <div id="recipe-time"><i style="font-size: 21px;" class="fa fa-clock-o" title="clock"></i><span> 45 mins </span>
                </div>
            </div>

        </div>
    </template>

    <!-- component registration -->
    <script>
    recipeCard = Vue.component('recipe-card', {
        data: function() {
            return { }
            },
        template: '#recipeCard',
    });
    </script>


    <script>
        var nav_bar = new Vue({ el: '#nav_bar' });

        var bakery = new Vue({
            el: "#app_greeting",
            data: {
                message: "Welcome to Dora Bakes!"
            },
            delimiters : ['[[', ']]']
        })

        var main_app = new Vue({
            el: "#main_app",
            data: {},
            delimiters : ['[[', ']]']
        })

    </script>

</body>
</html>